<form [formGroup]="form" (submit)="onSubmit()" *ngIf="!success">
  <h4 class="mb-4">Update Password</h4>
  <p>Update your password by answering the questions below.</p>
  <app-page-alert *ngIf="error" [text]="error" class="mb-2"></app-page-alert>
  <div>
    <div class="form-row">
      <div class="col-sm-4 text-sm-right">
        <label>Security Question:</label>
      </div>
      <div class="col-sm-8">
          <df-input-container>
            <input type="text" readonly class="form-control-plaintext" class="pl-1"
              formControlName="question" placeholder="Loading...">
          </df-input-container>
          <df-validation-messages [control]="form.controls.question"></df-validation-messages>
      </div>
    </div>

    <div class="form-row">
      <div class="col-sm-4 text-sm-right">
          <label>Answer:</label>
        </div>
        <div class="col-sm-8">
          <df-input-container>
            <input type="text" formControlName="answer" placeholder="Answer">
          </df-input-container>
          <df-validation-messages [control]="form.controls.answer"></df-validation-messages>
        </div>
    </div>

    <ng-container formGroupName="passwordGroup">
      <div class="form-row">
          <div class="col-sm-4 text-sm-right">
            <label>New Password:</label>
          </div>
          <div class="col-sm-8">
            <df-input-container>
              <input type="password" formControlName="password" placeholder="New Password">
            </df-input-container>
            <df-validation-messages [control]="form.controls.passwordGroup.controls.password" [validationMessagesMap]="passwordMessages"></df-validation-messages>
          </div>
        </div>
        <div class="form-row">
            <div class="col-sm-4 text-sm-right">
              <label>Confirm Password:</label>
            </div>
            <div class="col-sm-8">
              <df-input-container>
                <input type="password" formControlName="confirm" placeholder="Confirm Password">
              </df-input-container>
              <df-validation-messages [control]="form.controls.passwordGroup" [class.invisible]="!form.controls.passwordGroup.controls.confirm.valid"></df-validation-messages>
            </div>
          </div>
      </ng-container>
  </div>

  <button type="submit" class="d-block w-100" df-button theme="success"
  [loading]="pending"
  loaderPosition="after">Send</button>
  <div class="my-2 d-flex">
    <!-- <a [routerLink]="['../login']" class="back-to-login">
      <i class="fa fa-long-arrow-left"></i>
      Back to Login
    </a> -->
    <a routerLink="/support" class="ml-auto contact-support text-right">
      <i class="fa fa-envelope-o"></i>
      Contact Support
    </a>
  </div>
</form>
<div *ngIf="success">
  <p>
      Your password has been changed successfully!
  </p>
  <div class="my-2 d-flex">
      <a routerLink="/auth/login" class="back-to-login">
        <i class="fa fa-long-arrow-left"></i>
        Continue to Login
      </a>
      <a routerLink="/support" class="ml-auto contact-support text-right">
        <i class="fa fa-envelope-o"></i>
        Contact Support
      </a>
    </div>
</div>
